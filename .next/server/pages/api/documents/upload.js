"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/documents/upload";
exports.ids = ["pages/api/documents/upload"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("formidable");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdocuments%2Fupload&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fdocuments%2Fupload.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdocuments%2Fupload&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fdocuments%2Fupload.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_documents_upload_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/documents/upload.ts */ \"(api)/./src/pages/api/documents/upload.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_documents_upload_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_documents_upload_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/documents/upload\",\n        pathname: \"/api/documents/upload\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_documents_upload_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmRvY3VtZW50cyUyRnVwbG9hZCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyUyRnBhZ2VzJTJGYXBpJTJGZG9jdW1lbnRzJTJGdXBsb2FkLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ2dFO0FBQ2hFO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQywrREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsK0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFuZWxhbXZwLz9iZjI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmMvcGFnZXMvYXBpL2RvY3VtZW50cy91cGxvYWQudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9kb2N1bWVudHMvdXBsb2FkXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZG9jdW1lbnRzL3VwbG9hZFwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdocuments%2Fupload&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fdocuments%2Fupload.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/pages/api/documents/upload.ts":
/*!*******************************************!*\
  !*** ./src/pages/api/documents/upload.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! formidable */ \"formidable\");\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(formidable__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n// Disable Next.js body parsing for file uploads\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_3__.createClient)(\"https://mfzafryvlfseuexdnfcs.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY);\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        // Parse the uploaded file\n        const form = formidable__WEBPACK_IMPORTED_MODULE_0___default()({\n            uploadDir: path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"temp\"),\n            keepExtensions: true,\n            maxFileSize: 10 * 1024 * 1024\n        });\n        const [fields, files] = await new Promise((resolve, reject)=>{\n            form.parse(req, (err, fields, files)=>{\n                if (err) reject(err);\n                else resolve([\n                    fields,\n                    files\n                ]);\n            });\n        });\n        const uploadedFile = Array.isArray(files.file) ? files.file[0] : files.file;\n        if (!uploadedFile) {\n            return res.status(400).json({\n                error: \"No file uploaded\"\n            });\n        }\n        // Read file content\n        const fileContent = fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(uploadedFile.filepath);\n        const fileName = `${Date.now()}-${uploadedFile.originalFilename}`;\n        // Upload to Supabase Storage\n        const { data: uploadData, error: uploadError } = await supabase.storage.from(\"insurance-documents\").upload(fileName, fileContent, {\n            contentType: uploadedFile.mimetype || \"application/pdf\"\n        });\n        if (uploadError) {\n            throw new Error(`Upload failed: ${uploadError.message}`);\n        }\n        // Process document with AI (mock for now)\n        const extractedData = await processInsuranceDocument(fileContent, uploadedFile.mimetype);\n        // Store document record in database\n        const { data: docRecord, error: dbError } = await supabase.from(\"uploaded_documents\").insert({\n            document_type: \"collective_insurance\",\n            file_url: uploadData.path,\n            processed_data: extractedData,\n            processing_status: \"processed\"\n        }).select().single();\n        // Clean up temp file\n        fs__WEBPACK_IMPORTED_MODULE_1___default().unlinkSync(uploadedFile.filepath);\n        res.status(200).json({\n            success: true,\n            documentId: docRecord.id,\n            extractedData,\n            fileUrl: uploadData.path\n        });\n    } catch (error) {\n        console.error(\"Document upload error:\", error);\n        res.status(500).json({\n            error: \"Document processing failed\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        });\n    }\n}\n// Mock AI document processing (replace with real AI later)\nasync function processInsuranceDocument(fileContent, mimeType) {\n    // For now, return mock extracted data\n    // In Week 2, we'll replace this with real AI processing\n    return {\n        employeeInfo: {\n            name: \"To be extracted by AI\",\n            employeeId: \"TBD\",\n            department: \"TBD\"\n        },\n        insuranceDetails: {\n            provider: \"To be extracted by AI\",\n            policyNumber: \"TBD\",\n            coverageType: \"Group Insurance\",\n            benefitRate: \"70%\",\n            maxWeeks: \"17 weeks\"\n        },\n        benefitBreakdown: {\n            shortTermDisability: \"70% of salary\",\n            maternityCoverage: \"17 weeks\",\n            paternalCoverage: \"5 weeks\",\n            adoptionCoverage: \"Available\"\n        },\n        companyPolicy: {\n            topUpProvided: true,\n            topUpPercentage: \"15%\",\n            totalCoverage: \"85%\"\n        },\n        extractedAt: new Date().toISOString(),\n        processingMethod: \"AI_ANALYSIS\"\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2RvY3VtZW50cy91cGxvYWQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUNtQztBQUNoQjtBQUNJO0FBQzZCO0FBRXBELGdEQUFnRDtBQUN6QyxNQUFNSSxTQUFTO0lBQ3BCQyxLQUFLO1FBQ0hDLFlBQVk7SUFDZDtBQUNGLEVBQUM7QUFFRCxNQUFNQyxXQUFXSixtRUFBWUEsQ0FDM0JLLDBDQUFvQyxFQUNwQ0EsUUFBUUMsR0FBRyxDQUFDRSx5QkFBeUI7QUFHeEIsZUFBZUMsUUFBUUMsR0FBbUIsRUFBRUMsR0FBb0I7SUFDN0UsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLFFBQVE7UUFDekIsT0FBT0QsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQXFCO0lBQzVEO0lBRUEsSUFBSTtRQUNGLDBCQUEwQjtRQUMxQixNQUFNQyxPQUFPbkIsaURBQVVBLENBQUM7WUFDdEJvQixXQUFXbEIsZ0RBQVMsQ0FBQ00sUUFBUWMsR0FBRyxJQUFJO1lBQ3BDQyxnQkFBZ0I7WUFDaEJDLGFBQWEsS0FBSyxPQUFPO1FBQzNCO1FBRUEsTUFBTSxDQUFDQyxRQUFRQyxNQUFNLEdBQUcsTUFBTSxJQUFJQyxRQUFlLENBQUNDLFNBQVNDO1lBQ3pEVixLQUFLVyxLQUFLLENBQUNqQixLQUFLLENBQUNrQixLQUFLTixRQUFRQztnQkFDNUIsSUFBSUssS0FBS0YsT0FBT0U7cUJBQ1hILFFBQVE7b0JBQUNIO29CQUFRQztpQkFBTTtZQUM5QjtRQUNGO1FBQ0EsTUFBTU0sZUFBZUMsTUFBTUMsT0FBTyxDQUFDUixNQUFNUyxJQUFJLElBQUlULE1BQU1TLElBQUksQ0FBQyxFQUFFLEdBQUdULE1BQU1TLElBQUk7UUFFM0UsSUFBSSxDQUFDSCxjQUFjO1lBQ2pCLE9BQU9sQixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQW1CO1FBQzFEO1FBRUEsb0JBQW9CO1FBQ3BCLE1BQU1rQixjQUFjbkMsc0RBQWUsQ0FBQytCLGFBQWFNLFFBQVE7UUFDekQsTUFBTUMsV0FBVyxDQUFDLEVBQUVDLEtBQUtDLEdBQUcsR0FBRyxDQUFDLEVBQUVULGFBQWFVLGdCQUFnQixDQUFDLENBQUM7UUFFakUsNkJBQTZCO1FBQzdCLE1BQU0sRUFBRUMsTUFBTUMsVUFBVSxFQUFFMUIsT0FBTzJCLFdBQVcsRUFBRSxHQUFHLE1BQU10QyxTQUFTdUMsT0FBTyxDQUNwRUMsSUFBSSxDQUFDLHVCQUNMQyxNQUFNLENBQUNULFVBQVVILGFBQWE7WUFDN0JhLGFBQWFqQixhQUFha0IsUUFBUSxJQUFJO1FBQ3hDO1FBRUYsSUFBSUwsYUFBYTtZQUNmLE1BQU0sSUFBSU0sTUFBTSxDQUFDLGVBQWUsRUFBRU4sWUFBWU8sT0FBTyxDQUFDLENBQUM7UUFDekQ7UUFFQSwwQ0FBMEM7UUFDMUMsTUFBTUMsZ0JBQWdCLE1BQU1DLHlCQUF5QmxCLGFBQWFKLGFBQWFrQixRQUFRO1FBRXZGLG9DQUFvQztRQUNwQyxNQUFNLEVBQUVQLE1BQU1ZLFNBQVMsRUFBRXJDLE9BQU9zQyxPQUFPLEVBQUUsR0FBRyxNQUFNakQsU0FDL0N3QyxJQUFJLENBQUMsc0JBQ0xVLE1BQU0sQ0FBQztZQUNOQyxlQUFlO1lBQ2ZDLFVBQVVmLFdBQVcxQyxJQUFJO1lBQ3pCMEQsZ0JBQWdCUDtZQUNoQlEsbUJBQW1CO1FBQ3JCLEdBQ0NDLE1BQU0sR0FDTkMsTUFBTTtRQUVULHFCQUFxQjtRQUNyQjlELG9EQUFhLENBQUMrQixhQUFhTSxRQUFRO1FBRW5DeEIsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUNuQmdELFNBQVM7WUFDVEMsWUFBWVgsVUFBVVksRUFBRTtZQUN4QmQ7WUFDQWUsU0FBU3hCLFdBQVcxQyxJQUFJO1FBQzFCO0lBRUYsRUFBRSxPQUFPZ0IsT0FBTztRQUNkbUQsUUFBUW5ELEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDSixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQ25CQyxPQUFPO1lBQ1BvRCxTQUFTcEQsaUJBQWlCaUMsUUFBUWpDLE1BQU1rQyxPQUFPLEdBQUc7UUFDcEQ7SUFDRjtBQUNGO0FBRUEsMkRBQTJEO0FBQzNELGVBQWVFLHlCQUF5QmxCLFdBQW1CLEVBQUVtQyxRQUFpQjtJQUM1RSxzQ0FBc0M7SUFDdEMsd0RBQXdEO0lBRXhELE9BQU87UUFDTEMsY0FBYztZQUNaQyxNQUFNO1lBQ05DLFlBQVk7WUFDWkMsWUFBWTtRQUNkO1FBQ0FDLGtCQUFrQjtZQUNoQkMsVUFBVTtZQUNWQyxjQUFjO1lBQ2RDLGNBQWM7WUFDZEMsYUFBYTtZQUNiQyxVQUFVO1FBQ1o7UUFDQUMsa0JBQWtCO1lBQ2hCQyxxQkFBcUI7WUFDckJDLG1CQUFtQjtZQUNuQkMsa0JBQWtCO1lBQ2xCQyxrQkFBa0I7UUFDcEI7UUFDQUMsZUFBZTtZQUNiQyxlQUFlO1lBQ2ZDLGlCQUFpQjtZQUNqQkMsZUFBZTtRQUNqQjtRQUNBQyxhQUFhLElBQUluRCxPQUFPb0QsV0FBVztRQUNuQ0Msa0JBQWtCO0lBQ3BCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYW5lbGFtdnAvLi9zcmMvcGFnZXMvYXBpL2RvY3VtZW50cy91cGxvYWQudHM/YTAzOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCdcbmltcG9ydCBmb3JtaWRhYmxlIGZyb20gJ2Zvcm1pZGFibGUnXG5pbXBvcnQgZnMgZnJvbSAnZnMnXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJ1xuXG4vLyBEaXNhYmxlIE5leHQuanMgYm9keSBwYXJzaW5nIGZvciBmaWxlIHVwbG9hZHNcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGFwaToge1xuICAgIGJvZHlQYXJzZXI6IGZhbHNlLFxuICB9LFxufVxuXG5jb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChcbiAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMISxcbiAgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSFcbilcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pXG4gIH1cblxuICB0cnkge1xuICAgIC8vIFBhcnNlIHRoZSB1cGxvYWRlZCBmaWxlXG4gICAgY29uc3QgZm9ybSA9IGZvcm1pZGFibGUoe1xuICAgICAgdXBsb2FkRGlyOiBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3RlbXAnKSxcbiAgICAgIGtlZXBFeHRlbnNpb25zOiB0cnVlLFxuICAgICAgbWF4RmlsZVNpemU6IDEwICogMTAyNCAqIDEwMjQsIC8vIDEwTUJcbiAgICB9KVxuXG4gICAgY29uc3QgW2ZpZWxkcywgZmlsZXNdID0gYXdhaXQgbmV3IFByb21pc2U8YW55W10+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGZvcm0ucGFyc2UocmVxLCAoZXJyLCBmaWVsZHMsIGZpbGVzKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHJlamVjdChlcnIpXG4gICAgICAgIGVsc2UgcmVzb2x2ZShbZmllbGRzLCBmaWxlc10pXG4gICAgICB9KVxuICAgIH0pXG4gICAgY29uc3QgdXBsb2FkZWRGaWxlID0gQXJyYXkuaXNBcnJheShmaWxlcy5maWxlKSA/IGZpbGVzLmZpbGVbMF0gOiBmaWxlcy5maWxlXG5cbiAgICBpZiAoIXVwbG9hZGVkRmlsZSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdObyBmaWxlIHVwbG9hZGVkJyB9KVxuICAgIH1cblxuICAgIC8vIFJlYWQgZmlsZSBjb250ZW50XG4gICAgY29uc3QgZmlsZUNvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmModXBsb2FkZWRGaWxlLmZpbGVwYXRoKVxuICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7RGF0ZS5ub3coKX0tJHt1cGxvYWRlZEZpbGUub3JpZ2luYWxGaWxlbmFtZX1gXG5cbiAgICAvLyBVcGxvYWQgdG8gU3VwYWJhc2UgU3RvcmFnZVxuICAgIGNvbnN0IHsgZGF0YTogdXBsb2FkRGF0YSwgZXJyb3I6IHVwbG9hZEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5zdG9yYWdlXG4gICAgICAuZnJvbSgnaW5zdXJhbmNlLWRvY3VtZW50cycpXG4gICAgICAudXBsb2FkKGZpbGVOYW1lLCBmaWxlQ29udGVudCwge1xuICAgICAgICBjb250ZW50VHlwZTogdXBsb2FkZWRGaWxlLm1pbWV0eXBlIHx8ICdhcHBsaWNhdGlvbi9wZGYnLFxuICAgICAgfSlcblxuICAgIGlmICh1cGxvYWRFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVcGxvYWQgZmFpbGVkOiAke3VwbG9hZEVycm9yLm1lc3NhZ2V9YClcbiAgICB9XG5cbiAgICAvLyBQcm9jZXNzIGRvY3VtZW50IHdpdGggQUkgKG1vY2sgZm9yIG5vdylcbiAgICBjb25zdCBleHRyYWN0ZWREYXRhID0gYXdhaXQgcHJvY2Vzc0luc3VyYW5jZURvY3VtZW50KGZpbGVDb250ZW50LCB1cGxvYWRlZEZpbGUubWltZXR5cGUpXG5cbiAgICAvLyBTdG9yZSBkb2N1bWVudCByZWNvcmQgaW4gZGF0YWJhc2VcbiAgICBjb25zdCB7IGRhdGE6IGRvY1JlY29yZCwgZXJyb3I6IGRiRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndXBsb2FkZWRfZG9jdW1lbnRzJylcbiAgICAgIC5pbnNlcnQoe1xuICAgICAgICBkb2N1bWVudF90eXBlOiAnY29sbGVjdGl2ZV9pbnN1cmFuY2UnLFxuICAgICAgICBmaWxlX3VybDogdXBsb2FkRGF0YS5wYXRoLFxuICAgICAgICBwcm9jZXNzZWRfZGF0YTogZXh0cmFjdGVkRGF0YSxcbiAgICAgICAgcHJvY2Vzc2luZ19zdGF0dXM6ICdwcm9jZXNzZWQnXG4gICAgICB9KVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKClcblxuICAgIC8vIENsZWFuIHVwIHRlbXAgZmlsZVxuICAgIGZzLnVubGlua1N5bmModXBsb2FkZWRGaWxlLmZpbGVwYXRoKVxuXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRvY3VtZW50SWQ6IGRvY1JlY29yZC5pZCxcbiAgICAgIGV4dHJhY3RlZERhdGEsXG4gICAgICBmaWxlVXJsOiB1cGxvYWREYXRhLnBhdGhcbiAgICB9KVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRG9jdW1lbnQgdXBsb2FkIGVycm9yOicsIGVycm9yKVxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXG4gICAgICBlcnJvcjogJ0RvY3VtZW50IHByb2Nlc3NpbmcgZmFpbGVkJyxcbiAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgfSlcbiAgfVxufVxuXG4vLyBNb2NrIEFJIGRvY3VtZW50IHByb2Nlc3NpbmcgKHJlcGxhY2Ugd2l0aCByZWFsIEFJIGxhdGVyKVxuYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc0luc3VyYW5jZURvY3VtZW50KGZpbGVDb250ZW50OiBCdWZmZXIsIG1pbWVUeXBlPzogc3RyaW5nKSB7XG4gIC8vIEZvciBub3csIHJldHVybiBtb2NrIGV4dHJhY3RlZCBkYXRhXG4gIC8vIEluIFdlZWsgMiwgd2UnbGwgcmVwbGFjZSB0aGlzIHdpdGggcmVhbCBBSSBwcm9jZXNzaW5nXG4gIFxuICByZXR1cm4ge1xuICAgIGVtcGxveWVlSW5mbzoge1xuICAgICAgbmFtZTogXCJUbyBiZSBleHRyYWN0ZWQgYnkgQUlcIixcbiAgICAgIGVtcGxveWVlSWQ6IFwiVEJEXCIsXG4gICAgICBkZXBhcnRtZW50OiBcIlRCRFwiXG4gICAgfSxcbiAgICBpbnN1cmFuY2VEZXRhaWxzOiB7XG4gICAgICBwcm92aWRlcjogXCJUbyBiZSBleHRyYWN0ZWQgYnkgQUlcIiwgXG4gICAgICBwb2xpY3lOdW1iZXI6IFwiVEJEXCIsXG4gICAgICBjb3ZlcmFnZVR5cGU6IFwiR3JvdXAgSW5zdXJhbmNlXCIsXG4gICAgICBiZW5lZml0UmF0ZTogXCI3MCVcIixcbiAgICAgIG1heFdlZWtzOiBcIjE3IHdlZWtzXCJcbiAgICB9LFxuICAgIGJlbmVmaXRCcmVha2Rvd246IHtcbiAgICAgIHNob3J0VGVybURpc2FiaWxpdHk6IFwiNzAlIG9mIHNhbGFyeVwiLFxuICAgICAgbWF0ZXJuaXR5Q292ZXJhZ2U6IFwiMTcgd2Vla3NcIixcbiAgICAgIHBhdGVybmFsQ292ZXJhZ2U6IFwiNSB3ZWVrc1wiLFxuICAgICAgYWRvcHRpb25Db3ZlcmFnZTogXCJBdmFpbGFibGVcIlxuICAgIH0sXG4gICAgY29tcGFueVBvbGljeToge1xuICAgICAgdG9wVXBQcm92aWRlZDogdHJ1ZSxcbiAgICAgIHRvcFVwUGVyY2VudGFnZTogXCIxNSVcIixcbiAgICAgIHRvdGFsQ292ZXJhZ2U6IFwiODUlXCJcbiAgICB9LFxuICAgIGV4dHJhY3RlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgcHJvY2Vzc2luZ01ldGhvZDogXCJBSV9BTkFMWVNJU1wiXG4gIH1cbn0gIl0sIm5hbWVzIjpbImZvcm1pZGFibGUiLCJmcyIsInBhdGgiLCJjcmVhdGVDbGllbnQiLCJjb25maWciLCJhcGkiLCJib2R5UGFyc2VyIiwic3VwYWJhc2UiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJmb3JtIiwidXBsb2FkRGlyIiwiam9pbiIsImN3ZCIsImtlZXBFeHRlbnNpb25zIiwibWF4RmlsZVNpemUiLCJmaWVsZHMiLCJmaWxlcyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicGFyc2UiLCJlcnIiLCJ1cGxvYWRlZEZpbGUiLCJBcnJheSIsImlzQXJyYXkiLCJmaWxlIiwiZmlsZUNvbnRlbnQiLCJyZWFkRmlsZVN5bmMiLCJmaWxlcGF0aCIsImZpbGVOYW1lIiwiRGF0ZSIsIm5vdyIsIm9yaWdpbmFsRmlsZW5hbWUiLCJkYXRhIiwidXBsb2FkRGF0YSIsInVwbG9hZEVycm9yIiwic3RvcmFnZSIsImZyb20iLCJ1cGxvYWQiLCJjb250ZW50VHlwZSIsIm1pbWV0eXBlIiwiRXJyb3IiLCJtZXNzYWdlIiwiZXh0cmFjdGVkRGF0YSIsInByb2Nlc3NJbnN1cmFuY2VEb2N1bWVudCIsImRvY1JlY29yZCIsImRiRXJyb3IiLCJpbnNlcnQiLCJkb2N1bWVudF90eXBlIiwiZmlsZV91cmwiLCJwcm9jZXNzZWRfZGF0YSIsInByb2Nlc3Npbmdfc3RhdHVzIiwic2VsZWN0Iiwic2luZ2xlIiwidW5saW5rU3luYyIsInN1Y2Nlc3MiLCJkb2N1bWVudElkIiwiaWQiLCJmaWxlVXJsIiwiY29uc29sZSIsImRldGFpbHMiLCJtaW1lVHlwZSIsImVtcGxveWVlSW5mbyIsIm5hbWUiLCJlbXBsb3llZUlkIiwiZGVwYXJ0bWVudCIsImluc3VyYW5jZURldGFpbHMiLCJwcm92aWRlciIsInBvbGljeU51bWJlciIsImNvdmVyYWdlVHlwZSIsImJlbmVmaXRSYXRlIiwibWF4V2Vla3MiLCJiZW5lZml0QnJlYWtkb3duIiwic2hvcnRUZXJtRGlzYWJpbGl0eSIsIm1hdGVybml0eUNvdmVyYWdlIiwicGF0ZXJuYWxDb3ZlcmFnZSIsImFkb3B0aW9uQ292ZXJhZ2UiLCJjb21wYW55UG9saWN5IiwidG9wVXBQcm92aWRlZCIsInRvcFVwUGVyY2VudGFnZSIsInRvdGFsQ292ZXJhZ2UiLCJleHRyYWN0ZWRBdCIsInRvSVNPU3RyaW5nIiwicHJvY2Vzc2luZ01ldGhvZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/documents/upload.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdocuments%2Fupload&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fdocuments%2Fupload.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();